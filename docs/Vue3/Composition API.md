## ä¸ºä»€ä¹ˆä¼šäº§ç”Ÿ Composition API?





## Vue2 é€»è¾‘å¤ç”¨æ–¹å¼

**ç¼ºç‚¹**

- Mixin (å‘½åç©ºé—´å†²çªã€é€»è¾‘ä¸æ¸…æ™°ã€ä¸æ˜“å¤ç”¨)
- scoped slot ä½œç”¨åŸŸæ’æ§½ (é…ç½®é¡¹å¤šã€ä»£ç åˆ†è£‚ã€æ€§èƒ½å·®)
- Vue2 å¯¹ TS æ”¯æŒä¸å……åˆ†



## Composition API

**ä¼˜ç‚¹**

- é€»è¾‘ä»£ç æ›´å°‘, æ›´é›†ä¸­, æ›´æ˜“æ‰©å±•
- æ›´åŠ ä¸°å¯Œçš„ API é›†æˆ
- å¯¹ TS æ¥è¯´, éå¸¸å‹å¥½ (åˆ©äºç±»å‹æ¨å¯¼)



## Vue2 ä¸ Vue3 ç¼–å†™é£æ ¼ä¸Šçš„åŒºåˆ«

![image-20230225224850386](./assets/image-20230225224850386.png)

data çš„å˜é‡å®šä¹‰ ä¸ methods çš„æ–¹æ³•å®šä¹‰ -> æ•´åˆæˆä¸€ä¸ª setup ä¸­ 



**ä¼šä¸ä¼šå¯¼è‡´ setup æ–¹æ³•éå¸¸å¤§?**

ä¸ä¼š, æ–¹æ³•å’Œå˜é‡å¯ä»¥è¢«å®šä¹‰åˆ°ä¸åŒçš„ js æ–‡ä»¶ä¸­



**setup é€‰é¡¹ä¸­æ²¡æœ‰ this, æ— æ³•è®¿é—®ç»„ä»¶å£°æ˜ä¸­çš„å±æ€§, ä½†æ˜¯ Methods ä¸­æœ‰**

ä¸»è¦åŸå› æ˜¯åœ¨æ‰§è¡Œ setup æ—¶, å°šæœªåˆ›å»ºç»„ä»¶çš„å®ä¾‹, å› æ­¤åœ¨ setup ä¸­æ²¡æœ‰ this



**setup å‡½æ•°æ¥æ”¶ä¸¤ä¸ªå‚æ•° props ä¸ context**



**props ä¸å¯è§£æ„, context æœ‰ attrs/slots/emit å±æ€§** 

```typescript
// context æ²¡è§£æ„çš„ä½¿ç”¨
setup (props, ctx) {
    console.log('ğŸš€ ~ file: HomeChild.vue:15 ~ setup ~ attrs:', ctx.attrs)
}
// context è§£æ„çš„ä½¿ç”¨
setup (props, { emit, attrs }) {
    console.log('ğŸš€ ~ file: HomeChild.vue:15 ~ setup ~ attrs:', attrs)
}
```



**TS ç±»å‹æ¨å¯¼åœ¨ç»„åˆå¼ API ä¸­éå¸¸çš„å¥½ç”¨**



**ä½¿ç”¨ç»„åˆå¼ API å¯ä»¥å¾ˆæ–¹ä¾¿çš„æŠ½ç¦»é€»è¾‘ä»£ç è¿›è¡Œå¤ç”¨**













































